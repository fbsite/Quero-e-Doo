<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quero & Doo - Realize Desejos com Segurança</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .modal-enter-active, .faq-item-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 300ms, transform 300ms;
        }
        .modal-enter, .faq-item-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .wish-card-image {
            aspect-ratio: 16 / 9;
            object-fit: cover;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ---------- Mock data ----------
        const initialWishes = [
            { id: 'w1', author: 'Mariana Silva', title: 'Curso de UX Design', description: 'Quero fazer um curso intensivo de UX para melhorar meu currículo e migrar de carreira. Qualquer ajuda é bem-vinda!', target: 1200, collected: 450, image: 'https://placehold.co/600x400/FFF082/333333?text=Curso+UX', category: 'Educação' },
            { id: 'w2', author: 'Lucas Pereira', title: 'Tênis de corrida', description: 'Estou me preparando para correr minha primeira meia maratona e preciso de um tênis adequado para evitar lesões.', target: 450, collected: 200, image: 'https://placehold.co/600x400/E2E8F0/4A5568?text=Tênis', category: 'Esporte' },
            { id: 'w3', author: 'Julia Costa', title: 'Kindle para estudos', description: 'Um Kindle me ajudaria muito a ler os livros da faculdade e economizar com cópias.', target: 350, collected: 350, image: 'https://placehold.co/600x400/A7F3D0/333333?text=Kindle', category: 'Tecnologia' },
            { id: 'w4', author: 'Carlos Souza', title: 'Violão novo', description: 'Meu violão antigo quebrou e estou juntando dinheiro para comprar um novo e continuar minhas aulas.', target: 600, collected: 150, image: null, category: 'Hobbies' }
        ];

        // ---------- Helpers ----------
        function currencyBRL(value) {
            return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }
        
        function validateCPF(cpf) {
            cpf = String(cpf).replace(/[^\d]/g, '');
            if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) return false;
            let sum = 0, rest;
            for (let i = 1; i <= 9; i++) sum += parseInt(cpf.substring(i-1, i)) * (11 - i);
            rest = (sum * 10) % 11;
            if ((rest === 10) || (rest === 11)) rest = 0;
            if (rest !== parseInt(cpf.substring(9, 10))) return false;
            sum = 0;
            for (let i = 1; i <= 10; i++) sum += parseInt(cpf.substring(i-1, i)) * (12 - i);
            rest = (sum * 10) % 11;
            if ((rest === 10) || (rest === 11)) rest = 0;
            if (rest !== parseInt(cpf.substring(10, 11))) return false;
            return true;
        }

        // ---------- Componentes ----------
        
        function TermsOfUseModal({ show, onClose }) {
            if (!show) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4 modal-enter-active">
                    <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-3xl max-h-[80vh] flex flex-col">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold">Termos de Uso</h2>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>
                        </div>
                        <div className="overflow-y-auto pr-4 space-y-4 text-gray-600 text-sm">
                            <p className="font-semibold">Última atualização: 18 de Outubro de 2025</p>
                            <p>Bem-vindo(a) ao Quero & Doo. Ao utilizar nossa plataforma, você concorda com estes Termos de Uso. Por favor, leia-os com atenção. Este é um documento modelo e deve ser revisado por um profissional jurídico.</p>

                            <div>
                                <h3 className="font-bold text-gray-800 mb-2">1. Aceitação dos Termos</h3>
                                <p>Ao criar uma conta ou utilizar os serviços oferecidos, você declara ser maior de 18 anos e concorda em cumprir estes Termos, bem como nossa Política de Privacidade. Se você não concordar com qualquer parte dos termos, não deverá utilizar a plataforma.</p>
                            </div>

                            <div>
                                <h3 className="font-bold text-gray-800 mb-2">2. Descrição do Serviço</h3>
                                <p>O Quero & Doo é uma plataforma que permite aos usuários ("Criadores") criar campanhas de arrecadação de fundos ("Desejos") para fins pessoais. Outros usuários ("Doadores") podem contribuir financeiramente para esses Desejos. Atuamos como intermediários, facilitando a conexão e a transação financeira entre Criadores e Doadores.</p>
                            </div>
                            
                            <div>
                                <h3 className="font-bold text-gray-800 mb-2">3. Obrigações do Usuário (Criador)</h3>
                                <p>Ao criar um Desejo, você se compromete a: (a) fornecer informações verdadeiras, precisas e completas sobre si mesmo e sobre o objetivo da arrecadação; (b) utilizar os fundos arrecadados exclusivamente para o propósito declarado no Desejo; (c) não criar campanhas com conteúdo ilegal, fraudulento, difamatório ou que infrinja direitos de terceiros.</p>
                            </div>

                            <div>
                                <h3 className="font-bold text-gray-800 mb-2">4. Taxas e Pagamentos</h3>
                                <p>Cobramos uma taxa de serviço de 6% + R$0,99 sobre o valor de cada doação recebida. Esta taxa é deduzida automaticamente do valor doado e cobre os custos de processamento de pagamento e manutenção da plataforma. O Doador é informado sobre a taxa antes de finalizar a transação. Todas as transações são processadas por nosso parceiro de pagamentos (Stripe), e não armazenamos informações de cartão de crédito.</p>
                            </div>

                             <div>
                                <h3 className="font-bold text-gray-800 mb-2">5. Prazos de Saque</h3>
                                <p>O Criador pode solicitar o saque dos valores arrecadados (já descontadas as taxas) a qualquer momento através de seu Painel. O processamento do saque e a transferência para a conta bancária indicada serão realizados em até 48 horas úteis.</p>
                            </div>
                            
                            <div>
                                <h3 className="font-bold text-gray-800 mb-2">6. Limitação de Responsabilidade</h3>
                                <p>O Quero & Doo não se responsabiliza pela veracidade das campanhas criadas pelos usuários nem garante que os fundos serão utilizados para o fim proposto. Encorajamos os Doadores a doarem apenas para pessoas que conhecem e confiam. Não somos responsáveis por quaisquer disputas entre Criadores e Doadores.</p>
                            </div>
                        </div>
                        <div className="mt-6 text-right">
                            <button onClick={onClose} className="px-6 py-2 bg-amber-400 hover:bg-amber-500 text-gray-900 rounded-lg font-semibold">Fechar</button>
                        </div>
                    </div>
                </div>
            );
        }

        function StripePaymentFormPlaceholder() {
            return (
                <div className="bg-gray-50 border border-gray-200 rounded-lg p-4 text-left space-y-3">
                    <div className="text-center font-semibold text-gray-700">Pagamento Seguro com Cartão</div>
                    <div>
                        <label className="text-xs font-medium text-gray-600">Número do Cartão</label>
                        <div className="w-full bg-white border border-gray-300 rounded p-2 mt-1 text-sm text-gray-400"> •••• •••• •••• 4242 </div>
                    </div>
                    <div className="flex gap-3">
                        <div className="flex-1">
                            <label className="text-xs font-medium text-gray-600">Validade</label>
                            <div className="w-full bg-white border border-gray-300 rounded p-2 mt-1 text-sm text-gray-400"> MM / AA </div>
                        </div>
                        <div className="flex-1">
                            <label className="text-xs font-medium text-gray-600">CVC</label>
                            <div className="w-full bg-white border border-gray-300 rounded p-2 mt-1 text-sm text-gray-400"> ••• </div>
                        </div>
                    </div>
                     <p className="text-xs text-gray-500 text-center pt-2">Simulação de formulário de pagamento. Em produção, aqui seria integrado o Stripe Elements.</p>
                </div>
            );
        }

        function Header({ onNav, current, user }) {
            const navItems = [
                { id: 'home', label: 'Home', public: true },
                { id: 'wishes', label: 'Desejos', public: true },
                { id: 'publish', label: 'Publicar', public: false },
                { id: 'dashboard', label: 'Meu Painel', public: false },
            ];
            
            return (
                <header className="bg-white shadow-sm p-4 sticky top-0 z-20">
                    <div className="container mx-auto flex justify-between items-center">
                        <div className="flex items-center gap-3 cursor-pointer" onClick={() => onNav('home')}>
                            <div className="w-10 h-10 bg-amber-400 text-white flex items-center justify-center rounded-full font-bold text-xl">Q</div>
                            <div>
                                <h1 className="text-lg font-bold text-gray-800">Quero & Doo</h1>
                                <p className="text-xs text-gray-500 hidden sm:block">Realize desejos com segurança ✨</p>
                            </div>
                        </div>
                        <nav className="flex items-center gap-1 sm:gap-3">
                            {navItems.filter(item => item.public || user).map(item => (
                                <button key={item.id} className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${current === item.id ? 'bg-amber-100 text-amber-800' : 'text-gray-600 hover:bg-gray-100'}`} onClick={() => onNav(item.id)}>{item.label}</button>
                            ))}
                            {!user && (
                                <button className="px-3 py-2 rounded-md text-sm font-medium bg-amber-400 text-gray-900 hover:bg-amber-500" onClick={() => onNav('register')}>Cadastrar / Entrar</button>
                            )}
                        </nav>
                    </div>
                </header>
            );
        }
        
        function FaqSection() {
            const faqData = [
                { q: 'Como funciona o Quero & Doo?', a: 'Você cria um "desejo" com um valor meta para algo que quer ganhar. Outras pessoas podem doar qualquer quantia para te ajudar a atingir seu objetivo. Todas as transações são processadas com segurança.' },
                { q: 'Quais são as taxas da plataforma?', a: 'Para cobrir os custos de operação e do processamento de pagamentos, aplicamos uma taxa transparente de 6% + R$0,99 sobre cada doação. O doador vê o valor exato que o criador do desejo receberá antes de confirmar.' },
                { q: 'É seguro doar pelo site?', a: 'Sim. Seja por Cartão de Crédito/Débito ou Pix, utilizamos processadores de pagamento reconhecidos mundialmente (como a Stripe) para garantir que os seus dados sejam criptografados e nunca armazenados em nossos servidores. A segurança é nossa prioridade.' },
                { q: 'O que acontece quando um desejo atinge a meta?', a: 'Assim que a meta de arrecadação é atingida, o desejo é marcado como "Concluído" e não aceita mais doações. O criador é notificado e pode solicitar o saque do valor acumulado.' },
                { q: 'Como eu recebo o dinheiro que arrecadei?', a: 'No seu painel, você poderá solicitar o saque dos fundos para a sua conta bancária. O processo é simples, seguro e o valor é transferido em até 48 horas úteis.' }
            ];

            return (
                 <section className="mt-12">
                    <h3 className="text-2xl font-bold text-center mb-8">Perguntas Frequentes (FAQ)</h3>
                    <div className="max-w-3xl mx-auto space-y-4">
                        {faqData.map((item, index) => (
                             <details key={index} className="bg-white p-4 rounded-lg shadow-md group" open={index === 0}>
                                <summary className="font-semibold cursor-pointer list-none flex justify-between items-center"> {item.q} <span className="transform transition-transform duration-300 group-open:rotate-180"> <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"></path></svg> </span> </summary>
                                <p className="text-gray-600 mt-3">{item.a}</p>
                            </details>
                        ))}
                    </div>
                </section>
            );
        }
        
        function RegisterPage({ onRegister, onShowTerms }) {
            const [form, setForm] = useState({ fullName: '', cpf: '', email: '', whatsapp: '' });
            const [errors, setErrors] = useState({});
            const [cpfStatus, setCpfStatus] = useState('');
            const [agreed, setAgreed] = useState(false);

            const handleCpfChange = (e) => {
                const cpf = e.target.value;
                setForm({...form, cpf});
                if (cpf.replace(/[^\d]/g, '').length === 11) {
                    setCpfStatus(validateCPF(cpf) ? 'valid' : 'invalid');
                } else {
                    setCpfStatus('');
                }
            };
            
            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};
                if (!form.fullName) newErrors.fullName = "Nome completo é obrigatório.";
                if (!form.email) newErrors.email = "E-mail é obrigatório.";
                if (cpfStatus !== 'valid') newErrors.cpf = "CPF inválido.";
                if (!agreed) newErrors.agreed = "Você deve aceitar os termos para continuar.";

                setErrors(newErrors);

                if (Object.keys(newErrors).length === 0) {
                    onRegister({ name: form.fullName, cpf: form.cpf, email: form.email, whatsapp: form.whatsapp });
                }
            };

            return (
                <main className="container mx-auto p-4 md:p-6 max-w-lg">
                    <div className="bg-white p-8 rounded-lg shadow-md">
                        <h2 className="text-2xl font-bold mb-2">Crie sua Conta</h2>
                        <p className="text-gray-600 mb-6">É rápido, fácil e seguro.</p>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Nome completo (conforme documento)</label>
                                <input type="text" value={form.fullName} onChange={e => setForm({...form, fullName: e.target.value})} className={`mt-1 block w-full border-gray-300 rounded-md shadow-sm ${errors.fullName ? 'border-red-500' : ''}`} />
                                {errors.fullName && <p className="text-red-500 text-xs mt-1">{errors.fullName}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">CPF</label>
                                <input type="text" value={form.cpf} onChange={handleCpfChange} className={`mt-1 block w-full border-gray-300 rounded-md shadow-sm ${errors.cpf ? 'border-red-500' : ''}`} placeholder="000.000.000-00"/>
                                {cpfStatus === 'valid' && <p className="text-green-600 text-xs mt-1">CPF válido!</p>}
                                {cpfStatus === 'invalid' && <p className="text-red-500 text-xs mt-1">CPF inválido.</p>}
                                {errors.cpf && !cpfStatus && <p className="text-red-500 text-xs mt-1">{errors.cpf}</p>}
                            </div>
                             <div>
                                <label className="block text-sm font-medium text-gray-700">E-mail</label>
                                <input type="email" value={form.email} onChange={e => setForm({...form, email: e.target.value})} className={`mt-1 block w-full border-gray-300 rounded-md shadow-sm ${errors.email ? 'border-red-500' : ''}`} />
                                {errors.email && <p className="text-red-500 text-xs mt-1">{errors.email}</p>}
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">WhatsApp (Opcional)</label>
                                <input type="tel" value={form.whatsapp} onChange={e => setForm({...form, whatsapp: e.target.value})} className="mt-1 block w-full border-gray-300 rounded-md shadow-sm" placeholder="(00) 00000-0000"/>
                            </div>
                            
                            <div className="pt-2">
                                <div className="flex items-start">
                                    <div className="flex items-center h-5">
                                        <input
                                            id="terms"
                                            name="terms"
                                            type="checkbox"
                                            checked={agreed}
                                            onChange={() => setAgreed(!agreed)}
                                            className="focus:ring-amber-500 h-4 w-4 text-amber-600 border-gray-300 rounded"
                                        />
                                    </div>
                                    <div className="ml-3 text-sm">
                                        <label htmlFor="terms" className="text-gray-600">
                                            Li, estou de acordo com os <a href="#" onClick={(e) => { e.preventDefault(); onShowTerms(); }} className="font-medium text-amber-600 hover:underline">Termos de Uso</a> e confirmo que sou maior de 18 anos.
                                        </label>
                                    </div>
                                </div>
                                {errors.agreed && <p className="text-red-500 text-xs mt-1">{errors.agreed}</p>}
                            </div>

                            <div className="pt-4">
                                <button 
                                    type="submit" 
                                    disabled={!agreed}
                                    className="w-full px-6 py-3 bg-amber-400 hover:bg-amber-500 text-gray-900 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-opacity"
                                >
                                    Criar Conta
                                </button>
                            </div>
                        </form>
                    </div>
                </main>
            );
        }

        function Home({ wishes, onNav }) { return ( <main className="container mx-auto p-4 md:p-6"> <section className="text-center bg-white rounded-xl shadow-lg p-8 md:p-12"> <h2 className="text-3xl md:text-4xl font-bold text-gray-800">Realize sonhos com segurança ✨</h2> <p className="mt-4 max-w-2xl mx-auto text-gray-600">Publique o que você deseja ganhar ou ajude alguém a conquistar um objetivo. Simples, rápido e com a segurança que você precisa.</p> <div className="mt-8 flex flex-col sm:flex-row gap-4 justify-center"> <button onClick={() => onNav('publish')} className="px-6 py-3 bg-amber-400 hover:bg-amber-500 text-gray-900 rounded-lg font-semibold transition-transform transform hover:scale-105">Quero ganhar algo</button> <button onClick={() => onNav('wishes')} className="px-6 py-3 bg-gray-100 hover:bg-gray-200 border border-gray-200 rounded-lg font-semibold">Quero doar</button> </div> <div className="mt-6 text-sm text-gray-500 flex items-center justify-center gap-2"> <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clipRule="evenodd" /></svg> <span>Ambiente 100% seguro. Suas doações são protegidas com criptografia.</span> </div> </section> <section className="mt-12 grid md:grid-cols-3 gap-8"> <div className="md:col-span-2"> <h3 className="text-xl font-semibold mb-4">Desejos recentes</h3> <div className="bg-white shadow-md p-4 rounded-lg"> <ul className="space-y-3"> {wishes.slice(0, 3).map(w => ( <li key={w.id} className="flex items-center justify-between p-2 rounded-md hover:bg-gray-50"> <div> <strong className="font-semibold">{w.title}</strong> <div className="text-xs text-gray-500">por {w.author}</div> </div> <div className="text-sm font-medium text-gray-700">{currencyBRL(w.collected)} / <span className="text-gray-500">{currencyBRL(w.target)}</span></div> </li> ))} </ul> </div> </div> <div> <h3 className="text-xl font-semibold mb-4">Como funciona</h3> <ol className="space-y-3"> <li className="p-4 bg-white rounded-lg shadow-md flex items-center gap-4"> <span className="flex items-center justify-center w-8 h-8 rounded-full bg-amber-100 text-amber-800 font-bold">1</span> <span>Publique seu desejo 🎁</span> </li> <li className="p-4 bg-white rounded-lg shadow-md flex items-center gap-4"> <span className="flex items-center justify-center w-8 h-8 rounded-full bg-amber-100 text-amber-800 font-bold">2</span> <span>Compartilhe o link 🔗</span> </li> <li className="p-4 bg-white rounded-lg shadow-md flex items-center gap-4"> <span className="flex items-center justify-center w-8 h-8 rounded-full bg-amber-100 text-amber-800 font-bold">3</span> <span>Receba doações 💸</span> </li> <li className="p-4 bg-white rounded-lg shadow-md flex items-center gap-4"> <span className="flex items-center justify-center w-8 h-8 rounded-full bg-amber-100 text-amber-800 font-bold">4</span> <span>Realize seu sonho ✨</span> </li> </ol> </div> </section> <FaqSection /> </main> ); }
        function WishCard({ wish, onDonate }) { const pct = wish.target > 0 ? Math.min(100, Math.round((wish.collected / wish.target) * 100)) : 0; const isGoalReached = pct >= 100; return ( <div className={`bg-white rounded-lg shadow-md flex flex-col overflow-hidden ${isGoalReached ? 'opacity-70' : ''}`}> {wish.image ? ( <img src={wish.image} alt={wish.title} className="wish-card-image" /> ) : ( <div className="wish-card-image bg-gray-200 flex items-center justify-center"> <svg className="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </div> )} <div className="p-6 flex-grow flex flex-col"> <div className="flex-grow"> {isGoalReached && ( <div className="text-center bg-green-100 text-green-800 text-xs font-bold p-1 rounded-full mb-3">META ATINGIDA!</div> )} <h3 className="text-lg font-bold">{wish.title}</h3> <p className="text-xs text-gray-500 mt-1">por {wish.author} • <span className="font-semibold text-amber-600">{wish.category}</span></p> <p className="text-sm text-gray-600 mt-3">{wish.description}</p> </div> <div className="mt-4"> <div className="flex justify-between items-baseline mb-1"> <span className="text-lg font-bold text-gray-800">{currencyBRL(wish.collected)}</span> <span className="text-xs text-gray-500">meta: {currencyBRL(wish.target)}</span> </div> <div className="w-full bg-gray-200 h-2.5 rounded-full overflow-hidden"> <div style={{ width: `${pct}%` }} className={`h-full ${isGoalReached ? 'bg-green-500' : 'bg-amber-400'} transition-all duration-500`}></div> </div> <div className="mt-4 flex justify-between items-center"> <div className="text-sm font-medium text-gray-600">{pct}% arrecadado</div> <button onClick={() => onDonate(wish)} disabled={isGoalReached} className={`px-4 py-2 rounded-lg text-sm font-semibold transition-transform transform hover:scale-105 ${ isGoalReached ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700 text-white' }`}> {isGoalReached ? 'Meta Atingida' : 'Doar agora'} </button> </div> </div> </div> </div> ); }
        function WishesList({ wishes, onDonate, onNav }) { const [filter, setFilter] = useState('Todos'); const categories = ['Todos', ...Array.from(new Set(wishes.map(w => w.category)))]; const filtered = filter === 'Todos' ? wishes : wishes.filter(w => w.category === filter); return ( <main className="container mx-auto p-4 md:p-6"> <div className="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"> <h2 className="text-2xl font-bold">Desejos para Ajudar</h2> <div className="flex items-center gap-2 sm:gap-4"> <select id="category-filter" value={filter} onChange={(e) => setFilter(e.target.value)} className="border-gray-300 rounded-md shadow-sm focus:border-amber-400 focus:ring focus:ring-amber-200 focus:ring-opacity-50"> {categories.map(c => <option key={c} value={c}>{c}</option>)} </select> <button onClick={() => onNav('publish')} className="px-4 py-2 bg-amber-400 hover:bg-amber-500 text-gray-900 rounded-lg font-semibold whitespace-nowrap">Publicar um Desejo</button></div> </div> {filtered.length > 0 ? ( <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> {filtered.map(w => <WishCard key={w.id} wish={w} onDonate={onDonate} />)} </div> ) : ( <div className="text-center py-12 bg-white rounded-lg shadow-md"> <p className="text-gray-500">Nenhum desejo encontrado nesta categoria.</p> </div> )} </main> ); }
        function PublishForm({ onPublish, user }) { const [form, setForm] = useState({ name: user.name, title: '', description: '', target: '', image: null, category: '' }); const [imagePreview, setImagePreview] = useState(null); function handleImageChange(e) { const file = e.target.files[0]; if (file) { const reader = new FileReader(); reader.onloadend = () => { setForm({ ...form, image: reader.result }); setImagePreview(reader.result); }; reader.readAsDataURL(file); } } function submit(e) { e.preventDefault(); if (!form.name || !form.title || !form.target) { onPublish(null, 'Preencha nome, título e valor.'); return; } const newWish = { id: 'w' + Date.now(), author: form.name, title: form.title, description: form.description, target: Number(form.target), collected: 0, image: form.image, category: form.category || 'Geral' }; onPublish(newWish, 'Desejo publicado! Compartilhe o link para receber doações.'); setForm({ name: user.name, title: '', description: '', target: '', image: null, category: '' }); setImagePreview(null); } return ( <main className="container mx-auto p-4 md:p-6 max-w-2xl"> <div className="bg-white p-8 rounded-lg shadow-md"> <h2 className="text-2xl font-bold mb-6">Publique seu desejo</h2> <form onSubmit={submit} className="space-y-4"> <div> <label className="block text-sm font-medium text-gray-700">Seu nome</label> <input value={form.name} className="mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100" readOnly disabled/> </div> <div> <label className="block text-sm font-medium text-gray-700">Título do desejo</label> <input value={form.title} onChange={e => setForm({ ...form, title: e.target.value })} className="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-amber-400 focus:ring-amber-200" placeholder="Ex: Notebook para estudos"/> </div> <div> <label className="block text-sm font-medium text-gray-700">Descrição</label> <textarea value={form.description} onChange={e => setForm({ ...form, description: e.target.value })} className="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-amber-400 focus:ring-amber-200" rows="3" placeholder="Conte um pouco sobre o porquê você quer isso."></textarea> </div> <div> <label className="block text-sm font-medium text-gray-700">Valor (R$)</label> <input type="number" value={form.target} onChange={e => setForm({ ...form, target: e.target.value })} className="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-amber-400 focus:ring-amber-200" placeholder="3000.00"/> </div> <div> <label className="block text-sm font-medium text-gray-700">Imagem do desejo (Opcional)</label> <div className="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"> <div className="space-y-1 text-center"> {imagePreview ? ( <img src={imagePreview} alt="Pré-visualização" className="mx-auto h-24 w-auto rounded-md"/> ) : ( <svg className="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"> <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" /> </svg> )} <div className="flex text-sm text-gray-600"> <label htmlFor="file-upload" className="relative cursor-pointer bg-white rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none"> <span>Carregar um ficheiro</span> <input id="file-upload" name="file-upload" type="file" className="sr-only" accept="image/*" onChange={handleImageChange} /> </label> <p className="pl-1">ou arraste e solte</p> </div> <p className="text-xs text-gray-500">PNG, JPG, GIF até 10MB</p> </div> </div> </div> <div> <label className="block text-sm font-medium text-gray-700">Categoria</label> <input value={form.category} onChange={e => setForm({ ...form, category: e.target.value })} className="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-amber-400 focus:ring-amber-200" placeholder="Ex: Tecnologia, Educação, Esporte" /> </div> <div className="pt-4"> <button type="submit" className="w-full px-6 py-3 bg-amber-400 hover:bg-amber-500 text-gray-900 rounded-lg font-semibold transition-transform transform hover:scale-105">Publicar meu desejo</button> </div> </form> </div> </main> ); }
        function DonateModal({ wish, onClose, onConfirm }) { const [amount, setAmount] = useState('25'); const [paymentMethod, setPaymentMethod] = useState('card'); if (!wish) return null; const donationAmount = Number(amount) || 0; const fee = (donationAmount * 0.06) + 0.99; const netAmount = donationAmount - fee; return ( <div className="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-30 p-4 modal-enter-active"> <div className="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm"> <div className="flex justify-between items-center mb-1"> <h3 className="text-lg font-bold">Doe para: {wish.title}</h3> <button onClick={onClose} className="text-gray-400 hover:text-gray-600 text-2xl">&times;</button> </div> <div className="text-xs text-gray-500 flex items-center gap-1 mb-4"> <svg xmlns="http://www.w3.org/2000/svg" className="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clipRule="evenodd" /></svg> <span>Pagamento seguro e criptografado</span> </div> <div> <label className="block text-sm font-medium text-gray-700">Valor da doação (R$)</label> <input className="mt-1 w-full border-gray-300 rounded-md shadow-sm focus:border-amber-400 focus:ring-amber-200" type="number" placeholder="25.00" value={amount} onChange={e => setAmount(e.target.value)} /> </div> {donationAmount > 0 && ( <div className="mt-4 text-sm bg-gray-50 p-3 rounded-lg border"> <div className="flex justify-between"> <span className="text-gray-600">Sua doação:</span> <span className="font-medium">{currencyBRL(donationAmount)}</span> </div> <div className="flex justify-between mt-1"> <span className="text-gray-600">Taxa (6% + R$0,99):</span> <span className="font-medium text-red-500">-{currencyBRL(fee)}</span> </div> <hr className="my-2"/> <div className="flex justify-between font-bold"> <span>{wish.author} receberá:</span> <span>{netAmount > 0 ? currencyBRL(netAmount) : currencyBRL(0)}</span> </div> </div> )} <div className="grid grid-cols-2 gap-2 my-4"> <button onClick={() => setPaymentMethod('card')} className={`p-3 rounded-lg text-sm font-semibold text-center transition-colors ${paymentMethod === 'card' ? 'bg-amber-400 text-gray-900' : 'bg-gray-100 hover:bg-gray-200'}`}>Cartão de Crédito/Débito</button> <button onClick={() => setPaymentMethod('pix')} className={`p-3 rounded-lg text-sm font-semibold text-center transition-colors ${paymentMethod === 'pix' ? 'bg-amber-400 text-gray-900' : 'bg-gray-100 hover:bg-gray-200'}`}>Pix</button> </div> <div className="mt-2"> {paymentMethod === 'card' && <StripePaymentFormPlaceholder />} {paymentMethod === 'pix' && ( <div className="text-center p-4 bg-gray-50 rounded-lg border"> <h4 className="font-semibold text-gray-700">Pagar com Pix</h4> <svg className="mx-auto my-2 h-10 w-10 text-gray-700" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M11.875.002a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5V.502a.5.5 0 0 0-.5-.5h-1.234ZM4.125.002a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5V.502a.5.5 0 0 0-.5-.5H4.125ZM11.875 14.268a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5v-1.234a.5.5 0 0 0-.5-.5h-1.234ZM4.125 14.268a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5v-1.234a.5.5 0 0 0-.5-.5H4.125ZM14.268 4.125a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5V4.625a.5.5 0 0 0-.5-.5h-1.234ZM.002 4.125a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5V4.625a.5.5 0 0 0-.5-.5H.002ZM14.268 11.875a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5v-1.234a.5.5 0 0 0-.5-.5h-1.234ZM.002 11.875a.5.5 0 0 0-.5.5v1.234a.5.5 0 0 0 .5.5h1.234a.5.5 0 0 0 .5-.5v-1.234a.5.5 0 0 0-.5-.5H.002ZM8 3.031a5.002 5.002 0 0 0-4.33 2.515.5.5 0 0 0-.217.552l.235 1.008a.5.5 0 0 0 .515.366h.31a.5.5 0 0 0 .493-.418 3.001 3.001 0 0 1 5.548 0 .5.5 0 0 0 .493.418h.31a.5.5 0 0 0 .515-.366l.235-1.008a.5.5 0 0 0-.217-.552A5.002 5.002 0 0 0 8 3.031Zm-2.344 5.16a.5.5 0 0 0-.493.418 3.001 3.001 0 0 0 5.548 0 .5.5 0 0 0-.493-.418h-.31a.5.5 0 0 0-.515.366l-.235 1.008a.5.5 0 0 0 .217.552 5.002 5.002 0 0 1-4.33 2.515 5.002 5.002 0 0 1-4.33-2.515.5.5 0 0 0 .217-.552l.235-1.008a.5.5 0 0 0 .515-.366h.31Z"/></svg> <p className="text-sm mt-2">Em uma aplicação real, um QR Code dinâmico seria exibido aqui para pagamento.</p> </div> )} </div> <div className="mt-6 flex gap-3 justify-end"> <button onClick={onClose} className="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-sm font-semibold">Cancelar</button> <button onClick={() => onConfirm(wish.id, donationAmount)} className="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-semibold">Confirmar Doação</button> </div> </div> </div> ); }
        function Dashboard({ wishes, onEdit }) { return ( <main className="container mx-auto p-4 md:p-6"> <h2 className="text-2xl font-bold mb-2">Meu Painel</h2> <p className="text-gray-600 mb-6">Acompanhe seus desejos e doações recebidas.</p> {wishes.length > 0 ? ( <div className="grid grid-cols-1 md:grid-cols-2 gap-6"> {wishes.map(w => { const pct = w.target > 0 ? Math.min(100, Math.round((w.collected / w.target) * 100)) : 0; return ( <div key={w.id} className="bg-white p-4 rounded-lg shadow-md"> <div className="flex justify-between items-start"> <div> <strong className="font-semibold">{w.title}</strong> <div className="text-sm text-gray-600">{currencyBRL(w.collected)} / <span className="text-gray-500">{currencyBRL(w.target)}</span></div> </div> <button className="text-sm border border-gray-300 px-3 py-1 rounded-md hover:bg-gray-100" onClick={() => onEdit(w.id)}>Editar</button> </div> <div className="w-full bg-gray-200 h-2.5 rounded-full overflow-hidden mt-3"> <div style={{ width: `${pct}%` }} className="h-full bg-amber-400 transition-all duration-500"></div> </div> <p className="text-xs text-right mt-1 text-gray-500">{pct}% concluído</p> </div> ) })} </div> ) : ( <div className="text-center py-12 bg-white rounded-lg shadow-md"> <h3 className="text-lg font-semibold">Você ainda não publicou nenhum desejo.</h3> <p className="text-gray-500 mt-2">Clique em "Publicar" para começar!</p> </div> )} </main> ); }
        function AlertModal({ message, onClose }) { if (!message) return null; useEffect(() => { const timer = setTimeout(onClose, 3000); return () => clearTimeout(timer); }, [message, onClose]); return ( <div className="fixed top-5 right-5 bg-white rounded-lg shadow-lg p-4 z-50 flex items-center gap-3 border-l-4 border-amber-400 modal-enter-active"> <svg className="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span className="text-sm font-medium text-gray-700">{message}</span> <button onClick={onClose} className="text-gray-400 hover:text-gray-600">&times;</button> </div> ) }

        // ---------- App Principal ----------
        function QueroEDooApp() {
            const [wishes, setWishes] = useState(initialWishes);
            const [route, setRoute] = useState('home');
            const [donateTarget, setDonateTarget] = useState(null);
            const [alertMessage, setAlertMessage] = useState('');
            const [user, setUser] = useState(null);
            const [showTermsModal, setShowTermsModal] = useState(false);

            function handleSetRoute(newRoute) {
                if (!user && (newRoute === 'publish' || newRoute === 'dashboard')) {
                    setRoute('register');
                    setAlertMessage("Você precisa se cadastrar para acessar esta página.");
                } else {
                    setRoute(newRoute);
                }
            }
            
            function handleRegister(userData) {
                setUser(userData);
                setAlertMessage(`Bem-vindo(a), ${userData.name.split(' ')[0]}! Cadastro realizado com sucesso.`);
                setRoute('home');
            }

            function handlePublish(newWish, message) {
                if (newWish) {
                    setWishes([newWish, ...wishes]);
                    setRoute('wishes');
                }
                setAlertMessage(message);
            }
            
            function handleOpenDonation(wish) {
                if (wish.collected >= wish.target) {
                    setAlertMessage("Este desejo já atingiu a meta e não aceita mais doações.");
                    return;
                }
                setDonateTarget(wish);
            }

            function handleConfirmDonation(wishId, amount) {
                if (!amount || amount <= 0) { setAlertMessage("Por favor, insira um valor válido."); return; }
                const fee = (amount * 0.06) + 0.99;
                const netAmount = amount - fee;
                if (netAmount < 0) { setAlertMessage("O valor da doação deve ser maior que a taxa."); return; }
                
                setWishes(prev => prev.map(w => w.id === wishId ? { ...w, collected: w.collected + netAmount } : w));
                setDonateTarget(null);
                setAlertMessage('Obrigado pela doação! O valor foi processado.');
            }

            function handleEdit(wishId) {
                setAlertMessage('Função de edição ainda não implementada.');
            }

            const PageComponent = () => {
                switch(route) {
                    case 'home': return <Home wishes={wishes} onNav={handleSetRoute} />;
                    case 'wishes': return <WishesList wishes={wishes} onDonate={handleOpenDonation} onNav={handleSetRoute} />;
                    case 'publish': return <PublishForm onPublish={handlePublish} user={user} />;
                    case 'dashboard': return <Dashboard wishes={wishes.filter(w => w.author === user.name)} onEdit={handleEdit} />;
                    case 'register': return <RegisterPage onRegister={handleRegister} onShowTerms={() => setShowTermsModal(true)} />;
                    default: return <Home wishes={wishes} onNav={handleSetRoute} />;
                }
            };
            
            return (
                <div className="min-h-screen flex flex-col">
                    <Header current={route} onNav={handleSetRoute} user={user} />
                    <div className="flex-grow">
                        <PageComponent />
                    </div>
                    <footer className="p-6 text-center text-sm text-gray-600 border-t mt-12">
                        <div className="flex justify-center items-center gap-2 text-green-700 font-semibold mb-3">
                           <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M10 1.944A11.954 11.954 0 002.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0010 1.944zM11 14a1 1 0 11-2 0 1 1 0 012 0zm-1-7a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clipRule="evenodd" /></svg>
                           <span>Site Seguro</span>
                        </div>
                        <p>© {new Date().getFullYear()} Quero & Doo — Todos os Direitos Reservados</p>
                    </footer>
                    
                    <DonateModal wish={donateTarget} onClose={() => setDonateTarget(null)} onConfirm={handleConfirmDonation} />
                    <AlertModal message={alertMessage} onClose={() => setAlertMessage('')} />
                    <TermsOfUseModal show={showTermsModal} onClose={() => setShowTermsModal(false)} />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<QueroEDooApp />);
    </script>
</body>
</html>
